@model Bulgarikon.Core.DTOs.QuizDTOs.QuizDetailsDto
@{
    ViewData["Title"] = "Детайли";
    bool isAdmin = User.IsInRole("Admin");
}

<div class="container py-3">
    @if (TempData["Error"] != null)
    {
        <div class="alert alert-warning">@TempData["Error"]</div>
    }

    <div class="d-flex justify-content-between align-items-start gap-2 mb-3">
        <div>
            <div class="text-muted small">Куиз • @Model.EraName</div>
            <h1 class="mb-1">@Model.Title</h1>
            <div class="text-muted">Въпроси: @Model.QuestionsCount</div>

            @if (Model.QuestionsCount == 0)
            {
                <div class="text-muted small mt-1">Няма въпроси – куизът още не е готов за решаване.</div>
            }
        </div>

        <div class="d-flex gap-2 flex-wrap">
            <a asp-action="Index" class="btn btn-outline-secondary">← Назад</a>

            @if (!isAdmin)
            {
                <a asp-action="Take" asp-route-id="@Model.Id" class="btn btn-primary">Започни</a>
            }

            @if (isAdmin)
            {
                <a asp-controller="Questions"
                   asp-action="Index"
                   asp-route-quizId="@Model.Id"
                   class="btn btn-outline-primary">
                    Управлявай въпроси
                </a>

                <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-outline-primary">Редакция</a>

                <form asp-action="Delete" method="post" class="d-inline">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="id" value="@Model.Id" />
                    <button type="submit" class="btn btn-outline-danger">Изтрий</button>
                </form>
            }
        </div>
    </div>
</div>